$(document).ready(function(){getLocation().then(t=>getAirplanesList(t)).then(t=>setInterval(function(){getAirplanesList(t)},6e4)).catch(function(t){$(".loadingCircle").hide(),$(".airplanes-list tbody").html('<tr>\n          <td colspan="3" class="alert alert-danger">\n            In order to see list of airplanes nearby, you need to allow the browser to get your location\n          </td>\n        </tr>')}),$("#close-dialog").click(function(){$(".flight-details").hide(),$(".nearby-airplanes").removeClass("col-md-5"),$(".nearby-airplanes").addClass("col-md-12")})});const API_URL="https://public-api.adsbexchange.com/VirtualRadar/AircraftList.json";let airFlights;function getLocation(){return new Promise(function(t,a){navigator.geolocation.getCurrentPosition(t,a)})}function getAirplanesList(t){const a=t.coords.latitude,e=t.coords.longitude,n=0,i=100;return $.ajax({url:`${API_URL}?lat=${a}&lng=${e}&fDstL=${n}&fDstU=${i}`,dataType:"jsonp",beforeSend:function(){$(".airplanes-list tbody .airplane-data").hide(),$(".airplanes-list tbody").html(""),$(".loadingCircle").show()},success:function(t){(airFlights=t.acList.slice()).sort((t,a)=>a.Alt-t.Alt),airFlights.forEach(t=>{let a=t.long<0?"west":"east";$(".airplanes-list tbody").append(`<tr class="airplane-data" onClick="getFlightDetails(${t.Id})">\n            <td>\n            <img src="img/airplane_${a}.png"\n                 class="img-responsive"\n                 title="Going to ${a} side"\n                 alt="airplane-icon"/>\n            </td>\n            <td>${t.Alt} ft</td>\n            <td>${t.CNum}</td>\n          </tr>`)}),$(".airplanes-list tbody .airplane-data").show(),$(".loadingCircle").hide()}}),t}function getFlightDetails(t){let a=airFlights.find(a=>a.Id==t),e=a.Op;e=e.replace(/[^\w\s]/gi,""),$("#airplane-manufacturer").html(a.Man),$("#airplane-model").html(a.Mdl),$("#airplane-company").html(e),e=e.toLowerCase().replace(/\s/g,"_"),$("#airplane-logo").attr({src:`img/company/${e}.png`,alt:e}),$(".nearby-airplanes").removeClass("col-md-12"),$(".nearby-airplanes").addClass("col-md-5"),$(".flight-details").show()}